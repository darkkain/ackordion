window.ackordion=function(window){"use strict";function qs(expr,context){return(context||document).querySelector(expr)}function qsa(expr,context){return[].slice.call((context||document).querySelectorAll(expr),0)}function getAckordionTabPanel(element){for(var root=element;root;)if(root=root.parentElement,root&&"tabpanel"===root.getAttribute("role"))return root;return void 0}function getTransitionEndVendorPrefixNameAsString(){var t,el=document.createElement("div"),transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions)if(void 0!==el.style[t])return transitions[t];return"transitionend"}function expand(element,accordion){function transitionEnd(event){"max-height"==event.propertyName&&(element.style.maxHeight!==accordion.closeHeight&&(element.classList.add("ackordion-fix-safari-bug"),element.style.maxHeight="none",setTimeout(function(){element.classList.remove("ackordion-fix-safari-bug")},0)),element.removeEventListener(transitionEndVendorPrefix,transitionEnd,!1))}if(element){element.classList.add("ackordion-fix-safari-bug"),element.style.maxHeight="none";var BCR=element.getBoundingClientRect();element.style.maxHeight=accordion.closeHeight,ackordion.isTransitionEndDisabled||element.addEventListener(transitionEndVendorPrefix,transitionEnd,!1),element.offsetHeight,element.classList.remove("ackordion-fix-safari-bug"),window.requestAnimationFrame(function(){element.style.maxHeight=BCR.height+"px"})}}function collapse(element,accordion){if(element){element.classList.add("ackordion-fix-safari-bug"),element.style.maxHeight="none";var BCR=element.getBoundingClientRect(),height=BCR.height;if(0===height||height+"px"===accordion.closeHeight)return void element.classList.remove("ackordion-fix-safari-bug");element.style.maxHeight=height+"px",element.offsetHeight,element.classList.remove("ackordion-fix-safari-bug"),window.requestAnimationFrame(function(){element.style.maxHeight=accordion.closeHeight})}}function toggle(element){if(element){var tabpanel=getAckordionTabPanel(element),root=tabpanel.parentNode,id=root.getAttribute("id"),accordion=accordions[id],section=qs("section",tabpanel),content=section.firstElementChild;if(tabpanel.classList.toggle(cssClassActive),tabpanel.classList.contains(cssClassActive)?(tabpanel.setAttribute("aria-expanded","true"),expand(content,accordion)):(tabpanel.removeAttribute("aria-expanded"),collapse(content,accordion)),accordion&&accordion.autoClosePrevious&&accordion.previous&&tabpanel!==accordion.previous&&accordion.previous.classList.contains(cssClassActive)){var previousContent=qs("section > div",accordion.previous);collapse(previousContent,accordion),accordion.previous.classList.remove(cssClassActive),accordion.previous.removeAttribute("aria-expanded")}accordion&&(accordions[id].previous=tabpanel)}}function clearPrevious(id){if(id){var accordion=accordions[id];if(accordion)return accordions[id].previous=void 0,!0}return!1}function destroy(id){if(!id)return!1;var accordion=accordions[id];return accordion?(accordions[id]=void 0,!0):!1}function destroyAll(){Object.keys(accordions).forEach(function(id){accordions[id]=void 0}),accordions={}}function init(config){config?new Accordion(config):error("ackordion error - you must provide an argument to init")}function initAll(config){qsa(".ackordion").forEach(config&&"object"==typeof config?function(accordion){config.id=accordion.getAttribute("id"),new Accordion(config)}:function(accordion){new Accordion(accordion.getAttribute("id"))})}var document=window.document,console=window.console,log=console.log.bind(console),error=console.error.bind(console),cssClassActive="ackordion--active",accordions={},transitionEndVendorPrefix=getTransitionEndVendorPrefixNameAsString(),Accordion=function(config){if(!config)return void error("ackordion error - you must provide a config or id");var self=this;if(self.root,self.contents=[],self.previous,self.transition,self.autoClosePrevious=!0,self.closeHeight="0px","string"==typeof config?(self.id=config,self.root=document.getElementById(config)):"object"==typeof config&&(self.id=config.id,self.root=document.getElementById(config.id)),!self.root)return void error("ackordion error - component not found in html with id: "+self.id);if(self.contents=qsa("section > div",self.root),"object"==typeof config){if(self.transition=config.transition||"",self.duration=config.duration||"",self.closeHeight=config.closeHeight||"0px",0!==self.closeHeight.lastIndexOf("0",0)){var css=['.ackordion[id="',self.id,'"] > li:not(.ackordion--active) > section > div { max-height: ',self.closeHeight,";}"].join(""),head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css)),head.appendChild(style)}config.autoClosePrevious===!1&&(self.autoClosePrevious=!1)}self.transition&&self.contents.forEach(function(content){content.style.transition=self.transition}),self.duration&&self.contents.forEach(function(content){content.style.transitionDuration=config.duration});var id=self.root.getAttribute("id");id&&(accordions[id]&&log("ackordion warning - this id has already been init "+id),accordions[id]=self)};return{toggle:toggle,init:init,initAll:initAll,clearPrevious:clearPrevious,isTransitionEndDisabled:!1,destroy:destroy,destroyAll:destroyAll}}(window,void 0);